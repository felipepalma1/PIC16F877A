
; PIC16F877A Configuration Bit Settings

; ASM source line config statements

#include "p16F877A.inc"

; CONFIG
; __config 0xDF39
 __CONFIG _FOSC_XT & _WDTE_OFF & _PWRTE_OFF & _BOREN_OFF & _LVP_OFF & _CPD_OFF & _WRT_OFF & _CP_ON

 UNIDAD EQU 0x21
 DECENA EQU 0x22
 O	EQU 0x23
 M	EQU 0x24
 N	EQU 0x25
	
 BSF	STATUS,5
 CLRF	TRISB
 CLRF   TRISC
 BCF	STATUS,5
 MOVLW  D'6'
 MOVLF	ADCON1
 CLRF	UNIDAD
 CLRF	DECENA
 
 PRINCIPAL
    BTFSS   UNIDAD,1
    GOTO    NEXT
    BTFSS   UNIDAD,3
    GOTO    NEXT
    INCF    DECENA,1
    CLRF    UNIDAD
    BTFSS   DECENA,3
    GOTO    NEXT
    BTFSS   DECENA,1
    GOTO    NEXT
    CLRF    DECENA
    CLRF    UNIDAD
    GOTO    PRINCIPA L
 NEXT
    MOVF UNIDAD,0
    CALL DECUNIDAD
    MOVWF   PORTC
    MOVE    DECENA,0
    CALL    RETARDO
    MOVVMF  PORTB
    INCF    UNIDAD,1
    GOTO    PRINCIPAL
    
 DECDECENA
    ADDWF   PCL,1
    RETLW   B'00111111' ;0
    RETLW   B'00000110' ;1
    RETLW   B'01011011' ;2
    RETLW   B'01001111' ;3
    RETLW   B'01100110' ;4
    RETLW   B'01101101' ;5
    RETLW   B'01111101' ;6
    RETLW   B'00000111' ;7
    RETLW   B'01111111' ;8
    RETLW   B'01101111' ;9
 RETURN
 
 DECUNIDAD
    ADDWF   PLC,1
    RETLW   B'00111111' ;0
    RETLW   B'00000110' ;1
    RETLW   B'01011011' ;2
    RETLW   B'01001111' ;3
    RETLW   B'01100110' ;4
    RETLW   B'01101101' ;5
    RETLW   B'01111101' ;6
    RETLW   B'00000111' ;7
    RETLW   B'01111111' ;8
    RETLW   B'01101111' ;9
 RETURN
 
 RETARDO
 MOVLW	D'2'
 MOVWF	0
 TRES
 MOVLW	D'80'
 MOVWF	M
 DOS
 MOVLW	D'250'
 MOVWF	N
 UNO
 NOP
 NOP
 DECFSZ	N,1
 GOTO UNO
 DECFSZ	M,1
 GOTO	DOS
 DECFSZ	C,1
 GOTO	TRES
 RETURN
 END
